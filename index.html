<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"yoursite.com","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta property="og:type" content="website">
<meta property="og:title" content="zhanglu的博客">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="zhanglu的博客">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="zhanglu">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://yoursite.com/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>zhanglu的博客</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">zhanglu的博客</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>首页</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>归档</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/04/11/Mybatis-Plus%E6%9D%A1%E4%BB%B6%E6%9E%84%E9%80%A0%E5%99%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="zhanglu">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="zhanglu的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/04/11/Mybatis-Plus%E6%9D%A1%E4%BB%B6%E6%9E%84%E9%80%A0%E5%99%A8/" class="post-title-link" itemprop="url">Mybatis-Plus条件构造器</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-04-11 23:17:36 / 修改时间：23:19:57" itemprop="dateCreated datePublished" datetime="2020-04-11T23:17:36+08:00">2020-04-11</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Mybatis-Plus条件构造器"><a href="#Mybatis-Plus条件构造器" class="headerlink" title="Mybatis-Plus条件构造器"></a>Mybatis-Plus条件构造器</h1><h2 id="MySQL自定义排序ORDER-BY-FIELD"><a href="#MySQL自定义排序ORDER-BY-FIELD" class="headerlink" title="MySQL自定义排序ORDER BY FIELD()"></a>MySQL自定义排序ORDER BY FIELD()</h2><p>SELECT * FROM table ORDER BY FIELD(status,1,2,0);</p>
<p>这样子写的话，返回的结果集是按照字段status的1、2、0进行排序的，当然，也可以对字符串进行排序。</p>
<p>原理如下：</p>
<p>FIELD()函数是将参数1的字段对后续参数进行比较，并返回1、2、3等等，如果遇到null或者没有在结果集上存在的数据，则返回0，然后根据升序进行排序。</p>
<h2 id="mybatis-plus一些通用方法"><a href="#mybatis-plus一些通用方法" class="headerlink" title="mybatis-plus一些通用方法"></a><a href="https://www.cnblogs.com/xiaoyinger/p/12018359.html" target="_blank" rel="noopener">mybatis-plus一些通用方法</a></h2><h2 id="wrapper介绍："><a href="#wrapper介绍：" class="headerlink" title="wrapper介绍："></a><strong>wrapper介绍：</strong></h2><ol>
<li>AbstractWrapper: 用于查询条件封装，生成sql的where条件</li>
<li>AbstractLambdaWrapper: Lambda语法使用Wrapper统一处理解析lambda获取column</li>
<li>QueryWrapper: Entity 对象封装操作类，不是用lambda</li>
<li>UpdateWrapper: Update条件封装，用于Entity对象更新操作</li>
</ol>
<h2 id="CURD接口"><a href="#CURD接口" class="headerlink" title="CURD接口"></a><strong>CURD接口</strong></h2><h3 id="Mapper-CRUD接口"><a href="#Mapper-CRUD接口" class="headerlink" title="Mapper CRUD接口"></a><strong>Mapper CRUD接口</strong></h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">* <span class="keyword">int</span> insert （T entity）<span class="comment">//插入一条记录</span></span><br><span class="line">* deleteById(Serializable id) <span class="comment">//根据Id删除</span></span><br><span class="line">* deleteByMap( Map&lt;String, Object&gt; columnMap) <span class="comment">// 根据 columMap条件删除记录</span></span><br><span class="line">* <span class="keyword">int</span> delete（ Wrapper&lt;T&gt; wrapper）<span class="comment">//根据wrapper里面Entity条件删除</span></span><br><span class="line">* <span class="function"><span class="keyword">int</span> <span class="title">deleteBatchIds</span><span class="params">( Collection&lt;? extends Serializable&gt; idList)</span></span>; <span class="comment">//根据ID批量删除</span></span><br><span class="line">* <span class="function"><span class="keyword">int</span> <span class="title">updateById</span><span class="params">(T entity)</span></span>;<span class="comment">//根据ID修改</span></span><br><span class="line">* <span class="function"><span class="keyword">int</span> <span class="title">update</span><span class="params">(T entity, Wrapper&lt;T&gt; updateWrapper)</span></span>;<span class="comment">//entity作为set条件值，</span></span><br><span class="line">* updateWrapprt里面的entity用于生成where条件值</span><br><span class="line">* <span class="function">T <span class="title">seleteById</span><span class="params">(String id)</span> <span class="comment">//根据id查询</span></span></span><br><span class="line"><span class="function">* List&lt;T&gt; <span class="title">selectBatchIds</span><span class="params">( Collection&lt;? extends Serializable&gt; idList)</span></span>;<span class="comment">//根据id批量查询</span></span><br><span class="line">* <span class="function">List&lt;T&gt; <span class="title">selectByMap</span><span class="params">( Map&lt;String, Object&gt; columnMap)</span></span>;<span class="comment">//根据map条件</span></span><br><span class="line">* <span class="function">T <span class="title">selectOne</span><span class="params">( Wrapper&lt;T&gt; queryWrapper)</span></span>;<span class="comment">//根据wrapper里面的entity查找，如果不是唯一需要添加wrapper.last("limit 1")</span></span><br><span class="line">* <span class="function">Integer <span class="title">selectCount</span><span class="params">( Wrapper&lt;T&gt; queryWrapper)</span></span>;<span class="comment">//根据wrapper条件查询总数</span></span><br><span class="line">* <span class="function">List&lt;T&gt; <span class="title">selectList</span><span class="params">(Wrapper&lt;T&gt; queryWrapper)</span></span>; <span class="comment">//根据条件查询实体集合</span></span><br><span class="line">* List&lt;Map&lt;String, Object&gt;&gt; selectMaps( Wrapper&lt;T&gt; queryWrapper);<span class="comment">//根据 Wrapper 条件，查询全部记录</span></span><br><span class="line">* <span class="function">List&lt;Object&gt; <span class="title">selectObjs</span><span class="params">( Wrapper&lt;T&gt; queryWrapper)</span></span>;<span class="comment">//根据 Wrapper 条件，查询全部记录, 注意： 只返回第一个字段的值</span></span><br><span class="line">* <span class="function">Page&lt;T&gt; <span class="title">selectPage</span><span class="params">(IPage&lt;T&gt; page, Wrapper&lt;T&gt; queryWrapper)</span></span>;返回实体分页对象</span><br><span class="line">* IPage&lt;Map&lt;String, Object&gt;&gt; selectMapsPage(IPage&lt;T&gt; page, Wrapper&lt;T&gt; queryWrapper);<span class="comment">//返回字段映射对象 Map 分页对象;</span></span><br></pre></td></tr></table></figure>

<h2 id="Service-CURD接口"><a href="#Service-CURD接口" class="headerlink" title="Service CURD接口"></a><strong>Service CURD接口</strong></h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">* <span class="function"><span class="keyword">boolean</span> <span class="title">save</span><span class="params">(T entity)</span></span>;</span><br><span class="line">* <span class="function"><span class="keyword">boolean</span> <span class="title">saveBatch</span><span class="params">(Collection&lt;T&gt; entityList)</span></span>;</span><br><span class="line">* <span class="function"><span class="keyword">boolean</span> <span class="title">saveBatch</span><span class="params">(Collection&lt;T&gt; entityList, <span class="keyword">int</span> batchSize)</span></span>;<span class="comment">//batchSize每次的数量</span></span><br><span class="line">* <span class="function"><span class="keyword">boolean</span> <span class="title">saveOrUpdateBatch</span><span class="params">(Collection&lt;T&gt; entityList)</span></span>;<span class="comment">//批量修改插入</span></span><br><span class="line">* <span class="function"><span class="keyword">boolean</span> <span class="title">saveOrUpdateBatch</span><span class="params">(Collection&lt;T&gt; entityList, <span class="keyword">int</span> batchSize)</span></span>;</span><br><span class="line">* <span class="function"><span class="keyword">boolean</span> <span class="title">removeById</span><span class="params">(Serializable id)</span></span>;</span><br><span class="line">* <span class="function"><span class="keyword">boolean</span> <span class="title">removeByMap</span><span class="params">(Map&lt;String, Object&gt; columnMap)</span></span>;</span><br><span class="line">* <span class="function"><span class="keyword">boolean</span> <span class="title">remove</span><span class="params">(Wrapper&lt;T&gt; queryWrapper)</span></span>;<span class="comment">//queryWrapper 实体包装类,根据entuty条件删除</span></span><br><span class="line">* <span class="function"><span class="keyword">boolean</span> <span class="title">removeByIds</span><span class="params">(Collection&lt;? extends Serializable&gt; idList)</span></span>;</span><br><span class="line">* <span class="function"><span class="keyword">boolean</span> <span class="title">updateById</span><span class="params">(T entity)</span></span>;</span><br><span class="line">* <span class="function"><span class="keyword">boolean</span> <span class="title">update</span><span class="params">(T entity, Wrapper&lt;T&gt; updateWrapper)</span></span>;</span><br><span class="line">* <span class="function"><span class="keyword">boolean</span> <span class="title">updateBatchById</span><span class="params">(Collection&lt;T&gt; entityList, </span></span></span><br><span class="line"><span class="function"><span class="params">* <span class="keyword">int</span> batchSize)</span></span>;<span class="comment">//批量更新</span></span><br><span class="line">* <span class="function"><span class="keyword">boolean</span> <span class="title">saveOrUpdate</span><span class="params">(T entity)</span></span>;<span class="comment">//TableId 注解存在更新记录，否插入一条记录</span></span><br><span class="line">* &lt;T&gt; getById(Serializable id);<span class="comment">//根据id查询</span></span><br><span class="line">* <span class="function">Collection&lt;T&gt; <span class="title">listByIds</span><span class="params">(Collection&lt;? extends Serializable&gt; idList)</span></span>;<span class="comment">//查询（根据ID 批量查询）</span></span><br><span class="line">* <span class="function">Collection&lt;T&gt; <span class="title">listByMap</span><span class="params">(Map&lt;String, Object&gt; columnMap)</span></span>;</span><br><span class="line">* <span class="function">T <span class="title">getOne</span><span class="params">(Wrapper&lt;T&gt; queryWrapper, <span class="keyword">boolean</span> throwEx)</span></span>;<span class="comment">//throwEx 有多个 result 是否抛出异常</span></span><br><span class="line">* <span class="function">Map&lt;String, Object&gt; <span class="title">getMap</span><span class="params">(Wrapper&lt;T&gt; queryWrapper)</span></span>;<span class="comment">//根据 Wrapper，查询一条记录</span></span><br><span class="line">* <span class="function">Object <span class="title">getObj</span><span class="params">(Wrapper&lt;T&gt; queryWrapper)</span></span>;<span class="comment">//根据 Wrapper，查询一条记录</span></span><br><span class="line">* <span class="function"><span class="keyword">int</span> <span class="title">count</span><span class="params">(Wrapper&lt;T&gt; queryWrapper)</span></span>;<span class="comment">//根据 Wrapper 条件，查询总记录数</span></span><br><span class="line">* <span class="function">List&lt;T&gt; <span class="title">list</span><span class="params">(Wrapper&lt;T&gt; queryWrapper)</span></span>;<span class="comment">//查询列表</span></span><br><span class="line">* <span class="function">IPage&lt;T&gt; <span class="title">page</span><span class="params">(IPage&lt;T&gt; page, Wrapper&lt;T&gt; queryWrapper)</span></span>;<span class="comment">//page为翻页对象</span></span><br><span class="line">* List&lt;Map&lt;String, Object&gt;&gt; listMaps(Wrapper&lt;T&gt; queryWrapper);<span class="comment">//查询列表</span></span><br><span class="line">* <span class="function">List&lt;Object&gt; <span class="title">listObjs</span><span class="params">(Wrapper&lt;T&gt; queryWrapper)</span></span>;<span class="comment">//根据 Wrapper 条件，查询全部记录</span></span><br><span class="line">* IPage&lt;Map&lt;String, Object&gt;&gt; pageMaps(IPage&lt;T&gt; page, Wrapper&lt;T&gt; queryWrapper);</span><br></pre></td></tr></table></figure>

<h1 id="构造器方法"><a href="#构造器方法" class="headerlink" title="构造器方法"></a><strong>构造器方法</strong></h1><p><img src="/Users/panhuifang/%E5%8D%9A%E5%AE%A2%E6%96%87%E7%AB%A0/EE33B7B6-B8A0-42E9-96A6-19C1170A11B4.png" alt="EE33B7B6-B8A0-42E9-96A6-19C1170A11B4"></p>
<h1 id="常用方法"><a href="#常用方法" class="headerlink" title="常用方法"></a><strong>常用方法</strong></h1><h2 id="修改指定值"><a href="#修改指定值" class="headerlink" title="修改指定值"></a><strong>修改指定值</strong></h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">* UpdateWrapper&lt;User&gt; userUpdateWrapper = <span class="keyword">new</span> UpdateWrapper&lt;&gt;();</span><br><span class="line"></span><br><span class="line">* userUpdateWrapper.eq(<span class="string">"name"</span>, <span class="string">"lqf"</span>);</span><br><span class="line"></span><br><span class="line">* <span class="keyword">int</span> update = mapper.update(user, userUpdateWrapper);</span><br></pre></td></tr></table></figure>

<h2 id="查找不为空"><a href="#查找不为空" class="headerlink" title="查找不为空"></a><strong>查找不为空</strong></h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">QueryWrapper&lt;User&gt; queryWrapper = <span class="keyword">new</span> QueryWrapper&lt;&gt;();</span><br><span class="line"></span><br><span class="line">queryWrapper.eq(<span class="string">"name"</span>, <span class="string">"lqf"</span>);</span><br><span class="line"></span><br><span class="line">queryWrapper.isNotNull(<span class="string">"name"</span>);</span><br></pre></td></tr></table></figure>

<h2 id="查询为某列为空或等于某值-查询A列等于某值或B列等于某值"><a href="#查询为某列为空或等于某值-查询A列等于某值或B列等于某值" class="headerlink" title="查询为某列为空或等于某值/查询A列等于某值或B列等于某值"></a><strong>查询为某列为空或等于某值/查询A列等于某值或B列等于某值</strong></h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//查询班级Id为空或者为指定值</span></span><br><span class="line"></span><br><span class="line">query.lambda()</span><br><span class="line"></span><br><span class="line">.and(Obj -&gt;</span><br><span class="line"></span><br><span class="line">Obj.eq(User::getClazzId, (String) params.get(<span class="string">"clszzId"</span>)).or().isNull(User::getClazzId));</span><br><span class="line"></span><br><span class="line"><span class="comment">//查询A列等于某值或B列等于某值</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//（id='columnId' 'or' parent_id='columnId') and 1=1</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(StringUtil.isNotBlank(columnId)) &#123;</span><br><span class="line"></span><br><span class="line">StringBuilder column = <span class="keyword">new</span> StringBuilder(<span class="string">"(id='"</span>);</span><br><span class="line"></span><br><span class="line">column.append(columnId);</span><br><span class="line"></span><br><span class="line">column.append(<span class="string">"' or "</span>);</span><br><span class="line"></span><br><span class="line">column.append(<span class="string">"parent_id = '"</span>);</span><br><span class="line"></span><br><span class="line">column.append(columnId);</span><br><span class="line"></span><br><span class="line">column.append(<span class="string">"') and 1 "</span>);</span><br><span class="line"></span><br><span class="line">query.eq(column.toString(), <span class="string">"1"</span>); <span class="comment">//自己</span></span><br></pre></td></tr></table></figure>

<h2 id="根据时间区间查询"><a href="#根据时间区间查询" class="headerlink" title="根据时间区间查询"></a><strong>根据时间区间查询</strong></h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//这里前端采用vue的日期时间插件将值赋给orderTime,传到后台做日期区间查询</span></span><br><span class="line"></span><br><span class="line">&lt;el-date-picker</span><br><span class="line"></span><br><span class="line">style=<span class="string">"width: 30%;margin-right: 20px"</span></span><br><span class="line"></span><br><span class="line">value-format=<span class="string">"yyyy-MM-dd"</span></span><br><span class="line"></span><br><span class="line">v-model=<span class="string">"orderTime"</span></span><br><span class="line"></span><br><span class="line">type=<span class="string">"daterange"</span></span><br><span class="line"></span><br><span class="line">range-separator=<span class="string">"-"</span></span><br><span class="line"></span><br><span class="line">start-placeholder=<span class="string">"开始日期"</span></span><br><span class="line"></span><br><span class="line">end-placeholder=<span class="string">"结束日期"</span>&gt;</span><br><span class="line"></span><br><span class="line">&lt;/el-date-picker&gt;</span><br><span class="line"></span><br><span class="line">AbstractWrapper query = <span class="keyword">new</span> QueryWrapper&lt;&gt;();</span><br><span class="line"></span><br><span class="line">String beginOrderTime = (String) params.get(<span class="string">"time[0]"</span>);</span><br><span class="line"></span><br><span class="line">String endOrderTime = (String) params.get(<span class="string">"time[1]"</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (StringUtil.isNotBlank(beginOrderTime) &amp;&amp; StringUtil.isNotBlank(endOrderTime)) &#123;</span><br><span class="line"></span><br><span class="line">SimpleDateFormat formatter = <span class="keyword">new</span> SimpleDateFormat(<span class="string">"yyyy-MM-dd"</span>);</span><br><span class="line"></span><br><span class="line">Date beginTime = formatter.parse(beginOrderTime);</span><br><span class="line"></span><br><span class="line">Date endTime = formatter.parse(endOrderTime);</span><br><span class="line"></span><br><span class="line">query.between(<span class="string">"creation_time"</span>, beginTime, endTime);</span><br></pre></td></tr></table></figure>



<h2 id="批量删除"><a href="#批量删除" class="headerlink" title="批量删除"></a><strong>批量删除</strong></h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">String[] ids = ids.split(<span class="string">","</span>);</span><br><span class="line"></span><br><span class="line">List&lt;String&gt; idList = Arrays.asList(ids);</span><br><span class="line"></span><br><span class="line">eventService.removeByIds(idList);</span><br></pre></td></tr></table></figure>

<h2 id="存在-不存在"><a href="#存在-不存在" class="headerlink" title="存在||不存在"></a><strong>存在||不存在</strong></h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">AbstractWrapper queryTags = <span class="keyword">new</span> QueryWrapper&lt;&gt;();</span><br><span class="line"></span><br><span class="line">queryTags.in(<span class="string">"id"</span>, ids);</span><br><span class="line"></span><br><span class="line">List&lt;PubTag&gt; pubTagList = pubTagService.list(queryTags);</span><br></pre></td></tr></table></figure>

<h2 id="查询指定列"><a href="#查询指定列" class="headerlink" title="查询指定列"></a><strong>查询指定列</strong></h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">QueryWrapper query = <span class="keyword">new</span> QueryWrapper();</span><br><span class="line"></span><br><span class="line">query.select(<span class="string">"id"</span>, <span class="string">"name"</span>);</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/04/11/Gihub%E4%B8%8A%E4%B8%80%E4%BA%9B%E5%A5%BD%E7%9A%84java%E5%AD%A6%E4%B9%A0%E9%A1%B9%E7%9B%AE/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="zhanglu">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="zhanglu的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/04/11/Gihub%E4%B8%8A%E4%B8%80%E4%BA%9B%E5%A5%BD%E7%9A%84java%E5%AD%A6%E4%B9%A0%E9%A1%B9%E7%9B%AE/" class="post-title-link" itemprop="url">Gihub上一些好的java学习项目</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-04-11 22:50:05 / 修改时间：23:00:51" itemprop="dateCreated datePublished" datetime="2020-04-11T22:50:05+08:00">2020-04-11</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Github上一些好的java学习项目"><a href="#Github上一些好的java学习项目" class="headerlink" title="Github上一些好的java学习项目"></a>Github上一些好的java学习项目</h1><h2 id="1-advanced-java"><a href="#1-advanced-java" class="headerlink" title="1. advanced-java"></a>1. <a href="https://github.com/doocs/advanced-java" target="_blank" rel="noopener">advanced-java</a></h2><ul>
<li><p>互联网 Java 工程师进阶知识完全扫盲：涵盖高并发、分布式、高可用、微服务、海量数据处理等领域知识，后端同学必看，前端同学也可学习</p>
</li>
<li><p>国内学习网站： <strong><a href="https://doocs.gitee.io/advanced-java/#/README" target="_blank" rel="noopener">https://doocs.gitee.io/advanced-java/#/README</a></strong></p>
</li>
</ul>
<h2 id="2-JavaGuide"><a href="#2-JavaGuide" class="headerlink" title="2. JavaGuide"></a>2. <a href="https://github.com/Snailclimb/JavaGuide" target="_blank" rel="noopener">JavaGuide</a></h2><ul>
<li>【Java学习+面试指南】 一份涵盖大部分Java程序员所需要掌握的核心知识</li>
<li>国内学习网站：<strong><a href="https://gitee.com/SnailClimb/JavaGuide" target="_blank" rel="noopener">https://gitee.com/SnailClimb/JavaGuide</a></strong></li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/04/11/Feign%E4%BB%8B%E7%BB%8D%E5%8F%8A%E4%BD%BF%E7%94%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="zhanglu">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="zhanglu的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/04/11/Feign%E4%BB%8B%E7%BB%8D%E5%8F%8A%E4%BD%BF%E7%94%A8/" class="post-title-link" itemprop="url">Feign介绍及使用</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-04-11 22:14:39" itemprop="dateCreated datePublished" datetime="2020-04-11T22:14:39+08:00">2020-04-11</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Feign介绍及使用"><a href="#Feign介绍及使用" class="headerlink" title="Feign介绍及使用"></a>Feign介绍及使用</h1><p>feign是声明式的web service客户端，它让微服务之间的调用变得更简单了，类似controller调用service。Spring Cloud集成了Ribbon和Eureka，可在使用Feign时提供负载均衡的http客户端。</p>
<h2 id="引入Feign"><a href="#引入Feign" class="headerlink" title="引入Feign"></a><strong>引入Feign</strong></h2><p>项目中使用了gradle作为依赖管理，maven类似。</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">dependencies</span> <span class="string">&#123;</span>  <span class="string">//feign</span>  <span class="string">implementation('org.springframework.cloud:spring-cloud-starter-openfeign:2.0.2.RELEASE')</span>  <span class="string">//web</span>  <span class="string">implementation('org.springframework.boot:spring-boot-starter-web')</span>  <span class="string">//eureka</span> <span class="string">client</span>  <span class="string">implementation('org.springframework.cloud:spring-cloud-starter-netflix-eureka-client:2.1.0.M1')</span>  <span class="string">//test</span>  <span class="string">testImplementation('org.springframework.boot:spring-boot-starter-test')&#125;</span></span><br></pre></td></tr></table></figure>

<p>因为feign底层是使用了ribbon作为负载均衡的客户端，而ribbon的负载均衡也是依赖于eureka 获得各个服务的地址，所以要引入eureka-client。</p>
<p>SpringbootApplication启动类加上@FeignClient注解，以及@EnableDiscoveryClient。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@EnableFeignClients</span><span class="meta">@EnableDiscoveryClient</span><span class="meta">@SpringBootApplicationpublic</span> <span class="class"><span class="keyword">class</span> <span class="title">ProductApplication</span> </span>&#123;   <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;    SpringApplication.run(ProductApplication<span class="class">.<span class="keyword">class</span>, <span class="title">args</span>)</span>;  &#125;&#125;</span><br></pre></td></tr></table></figure>



<p>yaml配置：</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8082</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">#配置eureka</span></span><br><span class="line"><span class="attr">eureka:</span></span><br><span class="line">  <span class="attr">client:</span></span><br><span class="line">    <span class="attr">service-url:</span></span><br><span class="line">      <span class="attr">defaultZone:</span> <span class="string">http://localhost:8761/eureka</span></span><br><span class="line">  <span class="attr">instance:</span></span><br><span class="line">    <span class="attr">status-page-url-path:</span> <span class="string">/info</span></span><br><span class="line">    <span class="attr">health-check-url-path:</span> <span class="string">/health</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">#服务名称</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">product</span></span><br><span class="line">  <span class="attr">profiles:</span></span><br><span class="line">    <span class="attr">active:</span> <span class="string">$&#123;boot.profile:dev&#125;</span></span><br><span class="line"><span class="comment">#feign的配置，连接超时及读取超时配置</span></span><br><span class="line"><span class="attr">feign:</span></span><br><span class="line">  <span class="attr">client:</span></span><br><span class="line">    <span class="attr">config:</span></span><br><span class="line">      <span class="attr">default:</span></span><br><span class="line">        <span class="attr">connectTimeout:</span> <span class="number">5000</span></span><br><span class="line">        <span class="attr">readTimeout:</span> <span class="number">5000</span></span><br><span class="line">        <span class="attr">loggerLevel:</span> <span class="string">basic</span></span><br></pre></td></tr></table></figure>



<table>
<thead>
<tr>
<th>1234567891011121314151617181920212223242526</th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>
<h2 id="Feign的使用"><a href="#Feign的使用" class="headerlink" title="Feign的使用"></a><strong>Feign的使用</strong></h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@FeignClient</span>(value = <span class="string">"CART"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">CartFeignClient</span> </span>&#123;</span><br><span class="line"> </span><br><span class="line">    <span class="meta">@PostMapping</span>(<span class="string">"/cart/&#123;productId&#125;"</span>)</span><br><span class="line">    <span class="function">Long <span class="title">addCart</span><span class="params">(@PathVariable(<span class="string">"productId"</span>)</span>Long productId)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>上面是最简单的feign client的使用，声明完为feign client后，其他spring管理的类，如service就可以直接注入使用了，例如：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//这里直接注入feign client</span></span><br><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> CartFeignClient cartFeignClient;</span><br><span class="line"> </span><br><span class="line"><span class="meta">@PostMapping</span>(<span class="string">"/toCart/&#123;productId&#125;"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> ResponseEntity <span class="title">addCart</span><span class="params">(@PathVariable(<span class="string">"productId"</span>)</span> Long productId)</span>&#123;</span><br><span class="line">    Long result = cartFeignClient.addCart(productId);</span><br><span class="line">    <span class="keyword">return</span> ResponseEntity.ok(result);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>可以看到，使用feign之后，我们调用eureka 注册的其他服务，在代码中就像各个service之间相互调用那么简单。</p>
<h2 id="FeignClient注解的一些属性"><a href="#FeignClient注解的一些属性" class="headerlink" title="FeignClient注解的一些属性"></a><strong>FeignClient注解的一些属性</strong></h2><table>
<thead>
<tr>
<th>属性名</th>
<th>默认值</th>
<th>作用</th>
<th>备注</th>
</tr>
</thead>
<tbody><tr>
<td>value</td>
<td>空字符串</td>
<td>调用服务名称，和name属性相同</td>
<td></td>
</tr>
<tr>
<td>serviceId</td>
<td>空字符串</td>
<td>服务id，作用和name属性相同</td>
<td>已过期</td>
</tr>
<tr>
<td>name</td>
<td>空字符串</td>
<td>调用服务名称，和value属性相同</td>
<td></td>
</tr>
<tr>
<td>url</td>
<td>空字符串</td>
<td>全路径地址或hostname，http或https可选</td>
<td></td>
</tr>
<tr>
<td>decode404</td>
<td>false</td>
<td>配置响应状态码为404时是否应该抛出FeignExceptions</td>
<td></td>
</tr>
<tr>
<td>configuration</td>
<td>{}</td>
<td>自定义当前feign client的一些配置</td>
<td>参考FeignClientsConfiguration</td>
</tr>
<tr>
<td>fallback</td>
<td>void.class</td>
<td>熔断机制，调用失败时，走的一些回退方法，可以用来抛出异常或给出默认返回数据。</td>
<td>底层依赖hystrix，启动类要加上@EnableHystrix</td>
</tr>
<tr>
<td>path</td>
<td>空字符串</td>
<td>自动给所有方法的requestMapping前加上前缀，类似与controller类上的requestMapping</td>
<td></td>
</tr>
<tr>
<td>primary</td>
<td>true</td>
<td></td>
<td></td>
</tr>
</tbody></table>
<p>此外，还有qualifier及fallbackFactory，这里就不再赘述。</p>
<h2 id="Feign自定义处理返回的异常"><a href="#Feign自定义处理返回的异常" class="headerlink" title="Feign自定义处理返回的异常"></a><strong>Feign自定义处理返回的异常</strong></h2><p>这里贴上GitHub上openFeign的wiki给出的自定义errorDecoder例子。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StashErrorDecoder</span> <span class="keyword">implements</span> <span class="title">ErrorDecoder</span> </span>&#123;</span><br><span class="line"> </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Exception <span class="title">decode</span><span class="params">(String methodKey, Response response)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (response.status() &gt;= <span class="number">400</span> &amp;&amp; response.status() &lt;= <span class="number">499</span>) &#123;</span><br><span class="line">            <span class="comment">//这里是给出的自定义异常</span></span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> StashClientException(</span><br><span class="line">                    response.status(),</span><br><span class="line">                    response.reason()</span><br><span class="line">            );</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (response.status() &gt;= <span class="number">500</span> &amp;&amp; response.status() &lt;= <span class="number">599</span>) &#123;</span><br><span class="line">            <span class="comment">//这里是给出的自定义异常</span></span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> StashServerException(</span><br><span class="line">                    response.status(),</span><br><span class="line">                    response.reason()</span><br><span class="line">            );</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//这里是其他状态码处理方法</span></span><br><span class="line">        <span class="keyword">return</span> errorStatus(methodKey, response);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>自定义好异常处理类后，要在@Configuration修饰的配置类中声明此类。</p>
<h2 id="Feign使用OKhttp发送request"><a href="#Feign使用OKhttp发送request" class="headerlink" title="Feign使用OKhttp发送request"></a><strong>Feign使用OKhttp发送request</strong></h2><p>Feign底层默认是使用jdk中的HttpURLConnection发送HTTP请求，feign也提供了OKhttp来发送请求，具体配置如下：</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">feign:</span></span><br><span class="line">  <span class="attr">client:</span></span><br><span class="line">    <span class="attr">config:</span></span><br><span class="line">      <span class="attr">default:</span></span><br><span class="line">        <span class="attr">connectTimeout:</span> <span class="number">5000</span></span><br><span class="line">        <span class="attr">readTimeout:</span> <span class="number">5000</span></span><br><span class="line">        <span class="attr">loggerLevel:</span> <span class="string">basic</span></span><br><span class="line">  <span class="attr">okhttp:</span></span><br><span class="line">    <span class="attr">enabled:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">hystrix:</span></span><br><span class="line">    <span class="attr">enabled:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>



<h2 id="Feign原理简述"><a href="#Feign原理简述" class="headerlink" title="Feign原理简述"></a><strong>Feign原理简述</strong></h2><ul>
<li>启动时，程序会进行包扫描，扫描所有包下所有@FeignClient注解的类，并将这些类注入到spring的IOC容器中。当定义的Feign中的接口被调用时，通过JDK的动态代理来生成RequestTemplate。</li>
<li>RequestTemplate中包含请求的所有信息，如请求参数，请求URL等。</li>
<li>RequestTemplate声场Request，然后将Request交给client处理，这个client默认是JDK的HTTPUrlConnection，也可以是OKhttp、Apache的HTTPClient等。</li>
<li>最后client封装成LoadBaLanceClient，结合ribbon负载均衡地发起调用。</li>
</ul>
<p>详细原理请参考源码解析。</p>
<p>Feign、hystrix与retry的关系请参考<a href="https://xli1224.github.io/2017/09/22/configure-feign/" target="_blank" rel="noopener">https://xli1224.github.io/2017/09/22/configure-feign/</a></p>
<h2 id="Feign开启GZIP压缩"><a href="#Feign开启GZIP压缩" class="headerlink" title="Feign开启GZIP压缩"></a><strong>Feign开启GZIP压缩</strong></h2><p>Spring Cloud Feign支持对请求和响应进行GZIP压缩，以提高通信效率。</p>
<p>application.yml配置信息如下：</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">feign:</span></span><br><span class="line">  <span class="attr">compression:</span></span><br><span class="line">    <span class="attr">request:</span> <span class="comment">#请求</span></span><br><span class="line">      <span class="attr">enabled:</span> <span class="literal">true</span> <span class="comment">#开启</span></span><br><span class="line">      <span class="attr">mime-types:</span> <span class="string">text/xml,application/xml,application/json</span> <span class="comment">#开启支持压缩的MIME TYPE</span></span><br><span class="line">      <span class="attr">min-request-size:</span> <span class="number">2048</span> <span class="comment">#配置压缩数据大小的下限</span></span><br><span class="line">    <span class="attr">response:</span> <span class="comment">#响应</span></span><br><span class="line">      <span class="attr">enabled:</span> <span class="literal">true</span> <span class="comment">#开启响应GZIP压缩</span></span><br></pre></td></tr></table></figure>

<p>注意：</p>
<p>由于开启GZIP压缩之后，Feign之间的调用数据通过二进制协议进行传输，返回值需要修改为ResponseEntity&lt;byte[]&gt;才可以正常显示，否则会导致服务之间的调用乱码。</p>
<p>示例如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@PostMapping</span>(<span class="string">"/order/&#123;productId&#125;"</span>)</span><br><span class="line">ResponseEntity&lt;<span class="keyword">byte</span>[]&gt; addCart(<span class="meta">@PathVariable</span>(<span class="string">"productId"</span>) Long productId);</span><br></pre></td></tr></table></figure>



<h2 id="作用在所有Feign-Client上的配置方式"><a href="#作用在所有Feign-Client上的配置方式" class="headerlink" title="作用在所有Feign Client上的配置方式"></a><strong>作用在所有Feign Client上的配置方式</strong></h2><p>方式一：通过java bean 的方式指定。</p>
<p>@EnableFeignClients注解上有个defaultConfiguration属性，可以指定默认Feign Client的一些配置。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@EnableFeignClients</span>(defaultConfiguration = DefaultFeignConfiguration<span class="class">.<span class="keyword">class</span>)</span></span><br><span class="line"><span class="class">@<span class="title">EnableDiscoveryClient</span></span></span><br><span class="line"><span class="class">@<span class="title">SpringBootApplication</span></span></span><br><span class="line"><span class="class">@<span class="title">EnableCircuitBreaker</span></span></span><br><span class="line"><span class="class"><span class="title">public</span> <span class="title">class</span> <span class="title">ProductApplication</span> </span>&#123;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication.run(ProductApplication<span class="class">.<span class="keyword">class</span>, <span class="title">args</span>)</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>DefaultFeignConfiguration内容：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DefaultFeignConfiguration</span> </span>&#123;</span><br><span class="line"> </span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Retryer <span class="title">feignRetryer</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Retryer.Default(<span class="number">1000</span>,<span class="number">3000</span>,<span class="number">3</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>方式二：通过配置文件方式指定。</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">feign:</span></span><br><span class="line">  <span class="attr">client:</span></span><br><span class="line">    <span class="attr">config:</span></span><br><span class="line">      <span class="attr">default:</span></span><br><span class="line">        <span class="attr">connectTimeout:</span> <span class="number">5000</span> <span class="comment">#连接超时</span></span><br><span class="line">        <span class="attr">readTimeout:</span> <span class="number">5000</span> <span class="comment">#读取超时</span></span><br><span class="line">        <span class="attr">loggerLevel:</span> <span class="string">basic</span> <span class="comment">#日志等级</span></span><br></pre></td></tr></table></figure>



<h2 id="Feign-Client开启日志"><a href="#Feign-Client开启日志" class="headerlink" title="Feign Client开启日志"></a><strong>Feign Client开启日志</strong></h2><p>日志配置和上述配置相同，也有两种方式。</p>
<p>方式一：通过java bean的方式指定</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DefaultFeignConfiguration</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> Logger.<span class="function">Level <span class="title">feignLoggerLevel</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> Logger.Level.BASIC;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>方式二：通过配置文件指定</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">logging:</span><br><span class="line">  level:</span><br><span class="line">    com.xt.open.jmall.product.remote.feignclients.CartFeignClient: debug</span><br></pre></td></tr></table></figure>



<h2 id="Feign-的GET的多参数传递"><a href="#Feign-的GET的多参数传递" class="headerlink" title="Feign 的GET的多参数传递"></a><strong>Feign 的GET的多参数传递</strong></h2><p>目前，feign不支持GET请求直接传递POJO对象的，目前解决方法如下：</p>
<ol>
<li>把POJO拆散城一个一个单独的属性放在方法参数中</li>
<li>把方法参数编程Map传递</li>
<li>使用GET传递@RequestBody，但此方式违反restful风格</li>
</ol>
<p>介绍一个最佳实践，通过feign的拦截器来实现。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Slf</span>4j</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FeignCustomRequestInteceptor</span> <span class="keyword">implements</span> <span class="title">RequestInterceptor</span> </span>&#123;</span><br><span class="line"> </span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> ObjectMapper objectMapper;</span><br><span class="line"> </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">apply</span><span class="params">(RequestTemplate template)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (HttpMethod.GET.toString() == template.method() &amp;&amp; template.body() != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="comment">//feign 不支持GET方法传输POJO 转换成json，再换成query</span></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Map&lt;String, Collection&lt;String&gt;&gt; map = objectMapper.readValue(template.bodyTemplate(), <span class="keyword">new</span> TypeReference&lt;Map&lt;String, Collection&lt;String&gt;&gt;&gt;() &#123;</span><br><span class="line"> </span><br><span class="line">                &#125;);</span><br><span class="line">                template.body(<span class="keyword">null</span>);</span><br><span class="line">                template.queries(map);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                log.error(<span class="string">"cause exception"</span>, e);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/04/11/liunx%20%E5%91%BD%E4%BB%A4/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="zhanglu">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="zhanglu的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/04/11/liunx%20%E5%91%BD%E4%BB%A4/" class="post-title-link" itemprop="url">liunx 命令</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-04-11 22:05:10" itemprop="dateCreated datePublished" datetime="2020-04-11T22:05:10+08:00">2020-04-11</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="liunx-命令"><a href="#liunx-命令" class="headerlink" title="liunx 命令"></a>liunx 命令</h1><h2 id="1-基础命令"><a href="#1-基础命令" class="headerlink" title="1.基础命令"></a>1.基础命令</h2><p> cd usr    切换到该目录下usr目录</p>
<p>   cd ../     切换到上一层目录</p>
<p>   cd /      切换到系统根目录</p>
<p>   cd ~     切换到用户主目录</p>
<p>   cd -      切换到上一个所在目录</p>
<h3 id="1-增加目录操作（增）"><a href="#1-增加目录操作（增）" class="headerlink" title="(1)增加目录操作（增）"></a>(1)增加目录操作（增）</h3><p>命令：mkdir 目录名称</p>
<p>示例：在根目录 / 下 mkdir test，就会在根目录 / 下产生一个test问目录</p>
<h3 id="1-查看目录（查）"><a href="#1-查看目录（查）" class="headerlink" title="(1)查看目录（查）"></a>(1)查看目录（查）</h3><p>命令：ls [-al] 父目录</p>
<p>示例：在根目录 / 下使用ls，可以看到该目录下的所有的目录和文件</p>
<p>示例：在根目录 / 下使用ls，可以看到该目录下的所有的目录和文件</p>
<p>示例：在根目录 / 下使用ls -a，可以看到该目录下的所有文件和目录，包括隐藏的</p>
<p>示例：在根目录 / 下使用ls -l，可以看到该目录下的所有目录和文件的详细信息</p>
<p><strong>注意：ls -l 可以缩写成ll</strong></p>
<h3 id="1-搜索目录（查）"><a href="#1-搜索目录（查）" class="headerlink" title="(1)搜索目录（查）"></a>(1)搜索目录（查）</h3><p>命令：find 目录 参数 文件名称</p>
<p>示例：find /root -name ‘test*’</p>
<h3 id="2-修改目录的名称（改）"><a href="#2-修改目录的名称（改）" class="headerlink" title="(2)修改目录的名称（改）"></a>(2)修改目录的名称（改）</h3><p>命令：mv 目录名称 新目录名称</p>
<p>示例：test目录下有一个oldTest目录，使用mv oldTest newTest命令修改</p>
<p><strong>注意：mv的语法不仅可以对目录进行重命名而且也可以对各种文件，压缩包等进行   重命名的操作</strong></p>
<h3 id="3-移动目录的位置—剪切（改）"><a href="#3-移动目录的位置—剪切（改）" class="headerlink" title="(3)移动目录的位置—剪切（改）"></a>(3)移动目录的位置—剪切（改）</h3><p>命令：mv 目录名称 目录的新位置</p>
<p>示例：在test下将newTest目录剪切到 /usr下面，使用mv newTest /usr</p>
<p><strong>注意：mv语法不仅可以对目录进行剪切操作，对文件和压缩包等都可执行剪切操作</strong></p>
<h3 id="4-拷贝目录（改）"><a href="#4-拷贝目录（改）" class="headerlink" title="(4)拷贝目录（改）"></a>(4)拷贝目录（改）</h3><p>命令：cp -r 目录名称 目录拷贝的目标位置 —–r代表递归</p>
<p>示例：将/usr下的newTest拷贝到根目录下的test中，使用cp -r /usr/newTest /test</p>
<p><strong>注意：cp命令不仅可以拷贝目录还可以拷贝文件，压缩包等，拷贝文件和压缩包时不  用写-r递归</strong></p>
<h3 id="5-删除目录（删）"><a href="#5-删除目录（删）" class="headerlink" title="(5)删除目录（删）"></a>(5)删除目录（删）</h3><p>命令：rm [-rf] 目录</p>
<p>示例：删除/usr下的newTest，进入/usr下使用rm -r newTest</p>
<p>示例：删除/test下的newTest而不需要询问强制删除，在/test下使用rm -rf newTest</p>
<p><strong>注意：rm不仅可以删除目录，也可以删除其他文件或压缩包，为了方便大家的记忆，  无论删除任何目录或文件，都直接使用**</strong>rm -rf** <strong>目录/文件/压缩包</strong></p>
<h2 id="2．文件的操作命令（增删改查）"><a href="#2．文件的操作命令（增删改查）" class="headerlink" title="2．文件的操作命令（增删改查）"></a>2．文件的操作命令（增删改查）</h2><h3 id="1-文件的创建（增）"><a href="#1-文件的创建（增）" class="headerlink" title="(1)文件的创建（增）"></a>(1)文件的创建（增）</h3><p>命令：touch 文件名称 —– 空文件</p>
<p>示例：在test目录下创建一个空文件 touch aaa.txt</p>
<h3 id="2-文件的查看（查）"><a href="#2-文件的查看（查）" class="headerlink" title="(2)文件的查看（查）"></a>(2)文件的查看（查）</h3><p>命令：cat/more/less/tail 文件</p>
<p>示例：使用cat查看/etc/sudo.conf文件，只能显示最后一屏内容</p>
<p>示例：使用more查看/etc/sudo.conf文件，可以显示百分比，回车可以向下一行，  空格可以向下一页，q可以退出查看</p>
<p>示例：使用less查看/etc/sudo.conf文件，可以使用键盘上的PgUp和PgDn向上 和向下翻页，q结束查看</p>
<p>示例：使用tail -10 查看/etc/sudo.conf文件的后10行，Ctrl+C结束</p>
<p><strong>注意：命令 tail -f 文件 可以对某个文件进行动态监控，例如tomcat的日志文件，  会随着程序的运行，日志会变化，可以使用tail -f catalina-2016-11-11.log 监控   文 件的变化</strong></p>
<h3 id="3-修改文件的内容（改）"><a href="#3-修改文件的内容（改）" class="headerlink" title="(3)修改文件的内容（改）"></a>(3)修改文件的内容（改）</h3><p>命令：vim 文件</p>
<p>示例：编辑/test下的aaa.txt文件，使用vim aaa.txt</p>
<p>但此时并不能编辑，因为此时处于命令模式，点击键盘i/a/o进入编辑模式，可以  编辑文件</p>
<p>编辑完成后，按下Esc，退回命令模式</p>
<p>此时文件虽然已经编辑完成，但是没有保存，需输入冒号：进入底行模式，在底行模   式下输入wq代表写入内容并退出，即保存；输入q!代表强制退出不保存。</p>
<p><strong>总结：</strong></p>
<p>vim编辑器是Linux中的强大组件，是vi编辑器的加强版，vim编辑器的命令和快捷方式有很多，但此处不一一阐述，大家也无需研究的很透彻，使用vim编辑修改文件的方式基本会使用就可以了。</p>
<p>关于vim使用过程：</p>
<p>vim 文件——–&gt;命令模式———&gt;输入i———-&gt;编辑模式———–&gt;编辑文件———–&gt;按下Esc———&gt;命令模式———&gt;按下：———-&gt;底行模式———–&gt;输入wq保存并退出/q！强制退出不保存</p>
<h3 id="4-删除文件（删）"><a href="#4-删除文件（删）" class="headerlink" title="(4)删除文件（删）"></a>(4)删除文件（删）</h3><p>同目录删除：熟记 rm -rf 文件 即可</p>
<h2 id="3．压缩文件的操作命令"><a href="#3．压缩文件的操作命令" class="headerlink" title="3．压缩文件的操作命令"></a>3．压缩文件的操作命令</h2><h3 id="1-打包并压缩文件"><a href="#1-打包并压缩文件" class="headerlink" title="(1)打包并压缩文件"></a>(1)打包并压缩文件</h3><p>Windows的压缩文件的扩展名 .zip/.rar</p>
<p>linux中的打包文件：.tar</p>
<p>linux中的压缩文件：.gz</p>
<p>linux中打包并压缩的文件：.tar.gz</p>
<p>Linux中的打包文件一般是以.tar结尾的，压缩的命令一般是以.gz结尾的。</p>
<p>而一般情况下打包和压缩是一起进行的，打包并压缩后的文件的后缀名一般.tar.gz。</p>
<p>命令：tar -zcvf 打包压缩后的文件名 要打包的文件</p>
<p>其中：z：调用gzip压缩命令进行压缩</p>
<p>c：打包文件</p>
<p>v：显示运行过程</p>
<p>f：指定文件名</p>
<p>示例：打包并压缩/test下的所有文件 压缩后的压缩包指定名称为xxx.tar.gz</p>
<p>tar -zcvf xxx.tar.gz aaa.txt bbb.txt ccc.txt</p>
<p>或：tar -zcvf xxx.tar.gz /test/*</p>
<h3 id="2-解压压缩包（重点）"><a href="#2-解压压缩包（重点）" class="headerlink" title="(2)解压压缩包（重点）"></a>(2)解压压缩包<strong>（重点）</strong></h3><p>命令：tar [-xvf] 压缩文件</p>
<p>其中：x：代表解压</p>
<p>示例：将/test下的xxx.tar.gz解压到当前目录下</p>
<p>tar -xvf xxx.tar.gz</p>
<p>示例：将/test下的xxx.tar.gz解压到根目录/usr下</p>
<p><strong>tar -xvf xxx.tar.gz -C /usr——C**</strong>代表指定解压的位置**</p>
<h2 id="4．其他命令"><a href="#4．其他命令" class="headerlink" title="4．其他命令"></a>4．其他命令</h2><h3 id="1-显示工作目录"><a href="#1-显示工作目录" class="headerlink" title="(1)显示工作目录"></a>(1)显示工作目录</h3><p>命令：pwd</p>
<h3 id="2-查看进程"><a href="#2-查看进程" class="headerlink" title="(2)查看进程"></a>(2)查看进程</h3><p>命令：ps -ef —显示所有的进程</p>
<h3 id="3-kill命令"><a href="#3-kill命令" class="headerlink" title="(3)kill命令"></a>(3)kill命令</h3><p>命令：kill -9 pid（pid是进程的id）</p>
<h3 id="4-搜索命令"><a href="#4-搜索命令" class="headerlink" title="(4)搜索命令"></a>(4)搜索命令</h3><p>命令：grep 要搜索的字符串 要搜索的文件</p>
<p>示例：搜索/usr/sudu.conf文件中包含字符串to的行</p>
<p>示例：搜索/usr/sudu.conf文件中包含字符串to的行 to要高亮显示</p>
<h3 id="5-管道命令"><a href="#5-管道命令" class="headerlink" title="(5)管道命令"></a>(5)管道命令</h3><p>命令：|  将前一个命令的输出作为本次目录的输入</p>
<p>示例：查看当前系统中所有的进程中包括system字符串的进程</p>
<h3 id="6-网络通信命令"><a href="#6-网络通信命令" class="headerlink" title="(6)网络通信命令"></a>(6)网络通信命令</h3><p>查看当前系统的网卡信息：ifconfig</p>
<p>查看与某台机器的连接情况：ping</p>
<p>查看当前系统的端口使用：netstat -an</p>
<h3 id="7-关机命令"><a href="#7-关机命令" class="headerlink" title="(7)关机命令"></a>(7)关机命令</h3><p>重启命令：reboot</p>
<p>立即关机：halt</p>
<h2 id="5．Linux的权限命令"><a href="#5．Linux的权限命令" class="headerlink" title="5．Linux的权限命令"></a>5．Linux的权限命令</h2><p>权限是Linux中的重要概念，每个文件/目录等都具有权限，通过ls -l命令我们可以 查看某个目录下的文件或目录的权限</p>
<p>示例：在随意某个目录下ls -l</p>
<p>第一列的内容的信息解释如下：</p>
<p>文件的类型：</p>
<p>d：代表目录</p>
<p>-：代表文件</p>
<p>l：代表链接（可以认为是window中的快捷方式）</p>
<p>后面的9位分为3组，每3位置一组，分别代表属主的权限，与当前用户同组的   用户的权限，其他用户的权限</p>
<p>r：代表权限是可读，r也可以用数字4表示</p>
<p>w：代表权限是可写，w也可以用数字2表示</p>
<p>x：代表权限是可执行，x也可以用数字1表示</p>
<table>
<thead>
<tr>
<th><strong>属主（user</strong>）</th>
<th></th>
<th></th>
<th><strong>属组（<em>group</em>）</strong></th>
<th></th>
<th></th>
<th><strong>其他用户</strong></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>r</td>
<td>w</td>
<td>x</td>
<td>r</td>
<td>w</td>
<td>x</td>
<td>r</td>
<td>w</td>
<td>x</td>
</tr>
<tr>
<td>4</td>
<td>2</td>
<td>1</td>
<td>4</td>
<td>2</td>
<td>1</td>
<td>4</td>
<td>2</td>
<td>1</td>
</tr>
</tbody></table>
<p>修改文件/目录的权限的命令：chmod</p>
<p>示例：修改/test下的aaa.txt的权限为属主有全部权限，属主所在的组有读写权限，</p>
<p>其他用户只有读的权限</p>
<p>chmod u=rwx,g=rw,o=r aaa.txt</p>
<p>上述示例还可以使用数字表示：</p>
<p>chmod 764 aaa.txt</p>
<h1 id="二、远程连接工具的使用"><a href="#二、远程连接工具的使用" class="headerlink" title="二、远程连接工具的使用"></a>二、远程连接工具的使用</h1><p>实际开发中，Linux服务器都在其他的地方，我们要通过远程的方式去连接Linux并操作它，Linux远程的操作工具有很多，企业中常用的有Puttty、secureCRT、SSH Secure等。课程中我们使用SSH Secure工具进行远程连接，该工具是免费的图形化界面及命令行窗口集一身的远程工具。安装包如下：</p>
<p>安装后，会出现两个图标：</p>
<p>点击图形化界面图标：</p>
<p>进入界面：</p>
<p>关于远程工具乱码的解决：</p>
<p>使用远程工具进行连接时，如果linux有中文文件或目录，显示时会出现乱码，原因是linux编码是UTF-8，而远程工具默认是当前系统本地编码即GBK。所以解决方案是统一两者编码就OK了，但是该SSH Secure工具不能设置编码，所以通过修改linux的系统编码的方式进行统一编码。</p>
<p>在linux的/etc/sysconfig目录下有一个i18n的文件代表linux的系统编码</p>
<p>将其从UTF-8修改成GBK重现连接linux即可：</p>
<h1 id="三、Linux的软件安装"><a href="#三、Linux的软件安装" class="headerlink" title="三、Linux的软件安装"></a>三、Linux的软件安装</h1><h3 id="1．JDK安装"><a href="#1．JDK安装" class="headerlink" title="1．JDK安装"></a>1．JDK安装</h3><p>注意：rpm与软件相关命令 相当于window下的软件助手 管理软件</p>
<p>步骤：</p>
<p>1）查看当前Linux系统是否已经安装java</p>
<p>输入 rpm -qa | grep java</p>
<p>2）卸载两个openJDK</p>
<p>输入rpm -e –nodeps 要卸载的软件</p>
<p> 3）上传jdk到linux</p>
<p>4）解压jdk到/usr/local下 tar –xvf jdk-7u71-linux-i586.tar.gz –C /usr/local</p>
<p>5）配置jdk环境变量，打开/etc/profile配置文件，将下面配置拷贝进去</p>
<p>   #set java environment</p>
<p>   JAVA_HOME=/usr/local/jdk1.7.0_71</p>
<p>   CLASSPATH=.:$JAVA_HOME/lib.tools.jar</p>
<p>   PATH=$JAVA_HOME/bin:$PATH</p>
<p>   export JAVA_HOME CLASSPATH PATH</p>
<p>6）重新加载/etc/profile配置文件 source /etc/profile</p>
<p> 2．Mysql安装</p>
<p>步骤：</p>
<p>1）查看CentOS自带的mysql</p>
<p>输入 rpm -qa | grep mysql</p>
<p>2）将自带的mysql卸载</p>
<p>3）上传Mysql到linux</p>
<p>4）解压Mysql到/usr/local/下的mysql目录(mysql目录需要手动创建)内</p>
<p>cd /usr/local</p>
<p>mkdir mysql</p>
<p>tar -xvf MySQL-5.6.22-1.el6.i686.rpm-bundle.tar -C /usr/local/mysql</p>
<p>5）在/usr/local/mysql下安装mysql</p>
<p>安装服务器端：rpm -ivh MySQL-server-5.6.22-1.el6.i686.rpm</p>
<p>安装客户端：rpm -ivh MySQL-client-5.6.22-1.el6.i686.rpm</p>
<p>6）启动mysql</p>
<p>service mysql start</p>
<p>7）将mysql加到系统服务中并设置开机启动</p>
<p>加入到系统服务：chkconfig –add mysql</p>
<p>自动启动：chkconfig mysql on</p>
<p>8）登录mysql</p>
<p>mysql安装好后会生成一个临时随机密码，存储位置在/root/.mysql_secret</p>
<p> msyql –u root -p</p>
<p>9）修改mysql的密码</p>
<p>set password = password(‘root’);</p>
<p>10）开启mysql的远程登录</p>
<p>默认情况下mysql为安全起见，不支持远程登录mysql，所以需要设置开启   远程登录mysql的权限</p>
<p>登录mysql后输入如下命令：</p>
<p>grant all privileges on <em>.</em> to ‘root’ @’%’ identified by ‘root’;</p>
<p>flush privileges;</p>
<p>11）开放Linux的对外访问的端口3306</p>
<p>/sbin/iptables -I INPUT -p tcp –dport 3306 -j ACCEPT</p>
<p>/etc/rc.d/init.d/iptables save —将修改永久保存到防火墙中</p>
<p>3．Tomcat安装</p>
<p>步骤：</p>
<p>1）上传Tomcat到linux上</p>
<p>2）解压Tomcat到/usr/local下</p>
<p>3）开放Linux的对外访问的端口8080</p>
<p>/sbin/iptables -I INPUT -p tcp –dport 8080 -j ACCEPT</p>
<p>/etc/rc.d/init.d/iptables save</p>
<p>4）启动关闭Tomcat</p>
<p>进入tomcat的bin下启动：./startup.sh</p>
<p>进入tomcat的bin下关闭：./shutdown.sh</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/04/11/%E4%BD%BF%E7%94%A8EasyExcel%20%E8%AF%BB%E5%8F%96excel%E6%96%B9%E5%BC%8F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="zhanglu">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="zhanglu的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/04/11/%E4%BD%BF%E7%94%A8EasyExcel%20%E8%AF%BB%E5%8F%96excel%E6%96%B9%E5%BC%8F/" class="post-title-link" itemprop="url">使用EasyExcel 读取excel方式</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-04-11 21:44:17 / 修改时间：21:44:18" itemprop="dateCreated datePublished" datetime="2020-04-11T21:44:17+08:00">2020-04-11</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="使用EasyExcel-读取excel方式"><a href="#使用EasyExcel-读取excel方式" class="headerlink" title="使用EasyExcel 读取excel方式"></a>使用EasyExcel 读取excel方式</h1><h2 id="官方文档"><a href="#官方文档" class="headerlink" title="官方文档"></a>官方文档</h2><p><a href="https://alibaba-easyexcel.github.io/quickstart/read.html" target="_blank" rel="noopener">https://alibaba-easyexcel.github.io/quickstart/read.html</a></p>
<h2 id="一个demo"><a href="#一个demo" class="headerlink" title="一个demo"></a>一个demo</h2><p><a href="https://www.cnblogs.com/oukele/p/11443659.html" target="_blank" rel="noopener">https://www.cnblogs.com/oukele/p/11443659.html</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/04/11/Lombok%20%E4%BB%8B%E7%BB%8D%E5%8F%8A%E5%B8%B8%E7%94%A8%E6%B3%A8%E8%A7%A3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="zhanglu">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="zhanglu的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/04/11/Lombok%20%E4%BB%8B%E7%BB%8D%E5%8F%8A%E5%B8%B8%E7%94%A8%E6%B3%A8%E8%A7%A3/" class="post-title-link" itemprop="url">Lombok 介绍及常用注解</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-04-11 21:35:46" itemprop="dateCreated datePublished" datetime="2020-04-11T21:35:46+08:00">2020-04-11</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Lombok-介绍"><a href="#Lombok-介绍" class="headerlink" title="Lombok 介绍"></a>Lombok 介绍</h1><h2 id="1-介绍"><a href="#1-介绍" class="headerlink" title="1.介绍"></a>1.介绍</h2><p>在项目中使用Lombok可以减少很多重复代码的书写。比如说getter/setter/toString等方法的编写。</p>
<h2 id="2-IDEA中的安装"><a href="#2-IDEA中的安装" class="headerlink" title="2.IDEA中的安装"></a>2.IDEA中的安装</h2><p>打开IDEA的Setting –&gt; 选择Plugins选项 –&gt; 选择Browse repositories –&gt; 搜索lombok –&gt; 点击安装 –&gt; 安装完成重启IDEA –&gt; 安装成功</p>
<p><img src="https://leanote.com/api/file/getImage?fileId=5a54370fab644126e2000c44" alt="idea安装Lombok"></p>
<h2 id="3-引入依赖"><a href="#3-引入依赖" class="headerlink" title="3.引入依赖"></a>3.引入依赖</h2><p>在项目中添加Lombok依赖jar，在pom文件中添加如下部分。(不清楚版本可以在<a href="http://mvnrepository.com/" target="_blank" rel="noopener">Maven仓库</a>中搜索)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- https:&#x2F;&#x2F;mvnrepository.com&#x2F;artifact&#x2F;org.projectlombok&#x2F;lombok --&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.projectlombok&lt;&#x2F;groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;lombok&lt;&#x2F;artifactId&gt;</span><br><span class="line">    &lt;version&gt;1.16.18&lt;&#x2F;version&gt;</span><br><span class="line">    &lt;scope&gt;provided&lt;&#x2F;scope&gt;</span><br><span class="line">&lt;&#x2F;dependency&gt;</span><br></pre></td></tr></table></figure>

<h2 id="4-使用"><a href="#4-使用" class="headerlink" title="4.使用"></a>4.使用</h2><p>在对应的类或者方法上使用对应注解即可</p>
<h2 id="5-Lombok常用注解"><a href="#5-Lombok常用注解" class="headerlink" title="5.Lombok常用注解"></a>5.Lombok常用注解</h2><ul>
<li>@Setter<br>@Getter<br>@Data<br>@Log(这是一个泛型注解，具体有很多种形式)<br>@AllArgsConstructor<br>@NoArgsConstructor<br>@EqualsAndHashCode<br>@NonNull<br>@Cleanup<br>@ToString<br>@RequiredArgsConstructor<br>@Value<br>@SneakyThrows<br>@Synchronized</li>
</ul>
<h2 id="6-注解详情"><a href="#6-注解详情" class="headerlink" title="6.注解详情"></a>6.注解详情</h2><h3 id="6-1-log"><a href="#6-1-log" class="headerlink" title="6.1 log"></a>6.1 log</h3><p>注解在 <strong>类</strong> 上。有如下可选择可用：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//@CommonsLog</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> org.apache.commons.logging.Log log = org.apache.commons.logging.LogFactory.getLog(LogExample<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line"><span class="comment">//@JBossLog</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> org.jboss.logging.Logger log = org.jboss.logging.Logger.getLogger(LogExample<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line"><span class="comment">//@Log</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> java.util.logging.Logger log = java.util.logging.Logger.getLogger(LogExample<span class="class">.<span class="keyword">class</span>.<span class="title">getName</span>())</span>;</span><br><span class="line"><span class="comment">//@Log4j</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> org.apache.log4j.Logger log = org.apache.log4j.Logger.getLogger(LogExample<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line"><span class="comment">//@Log4j2</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> org.apache.logging.log4j.Logger log = org.apache.logging.log4j.LogManager.getLogger(LogExample<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line"><span class="comment">//@Slf4j</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> org.slf4j.Logger log = org.slf4j.LoggerFactory.getLogger(LogExample<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line"><span class="comment">//@XSlf4j</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> org.slf4j.ext.XLogger log = org.slf4j.ext.XLoggerFactory.getXLogger(LogExample<span class="class">.<span class="keyword">class</span>)</span>;</span><br></pre></td></tr></table></figure>

<p>默认情况下，记录器的主题（或名称）将是使用注释进行<code>@Log</code>注释的类的类名称。这可以通过指定<code>topic</code>参数来定制。例如：<code>@XSlf4j(topic=&quot;reporting&quot;)</code>。</p>
<p>该类型注解可以满足不同的日志系统的日志使用，Lombok提供了一些自定义配置项可以参看官方说明文档。</p>
<p><a href="https://projectlombok.org/features/log" target="_blank" rel="noopener">Log官方介绍</a></p>
<h3 id="6-2-Getter和-Setter"><a href="#6-2-Getter和-Setter" class="headerlink" title="6.2 @Getter和@Setter"></a>6.2 @Getter和@Setter</h3><p>该注解使用在<strong>类或者属性</strong>上，该注解可以使用在类上也可以使用在属性上。生成的getter遵循布尔属性的约定。例如：boolean类型的sex,getter方法为<code>isSex</code>而不是<code>getSex</code></p>
<p>在使用该注解时，会默认生成一个无参构造。和对应的getterhe setter方法</p>
<p><img src="https://leanote.com/api/file/getImage?fileId=5a54370fab644126e2000c49" alt="img"></p>
<p>该注解也可以使用在单个属性上，会默认生成一个无参构造：</p>
<p><img src="https://leanote.com/api/file/getImage?fileId=5a54370fab644126e2000c48" alt="img"></p>
<h3 id="6-3-Data"><a href="#6-3-Data" class="headerlink" title="6.3 @Data"></a>6.3 @Data</h3><p>该注解使用在类上，该注解是最常用的注解，它结合了@ToString，@EqualsAndHashCode， @Getter和@Setter。本质上使用@Data注解，类默认@ToString和@EqualsAndHashCode以及每个字段都有@Setter和@getter。该注解也会生成一个公共构造函数，可以将任何@NonNull和final字段作为参数。</p>
<p>虽然<code>@Data</code>注解非常有用，但是它没有与其他注解相同的控制粒度。<code>@Data</code>提供了一个可以生成静态工厂的单一参数，将<code>staticConstructor</code>参数设置为所需要的名称，Lombok自动生成的构造函数设置为私有，并提供公开的给定名称的静态工厂方法。<br><img src="https://leanote.com/api/file/getImage?fileId=5a546265ab644126e2001263" alt="示例"></p>
<p><img src="https://leanote.com/api/file/getImage?fileId=5a54370fab644126e2000c43" alt="img"></p>
<h3 id="6-4-NonNull"><a href="#6-4-NonNull" class="headerlink" title="6.4 @NonNull"></a>6.4 @NonNull</h3><p>该注解使用在<strong>属性</strong>上，该注解用于属的非空检查，当放在setter方法的字段上，将生成一个空检查，如果为空，则抛出<code>NullPointerException</code>。<br>该注解会默认是生成一个无参构造。</p>
<p><img src="https://leanote.com/api/file/getImage?fileId=5a54370fab644126e2000c47" alt="img"></p>
<h3 id="6-5-toString"><a href="#6-5-toString" class="headerlink" title="6.5 @toString"></a>6.5 @toString</h3><p>该注解使用在类上，该注解默认生成任何非讲台字段以名称-值的形式输出。<br>1、如果需要可以通过注释参数includeFieldNames来控制输出中是否包含的属性名称。<br>2、可以通过exclude参数中包含字段名称，可以从生成的方法中排除特定字段。<br>3、可以通过callSuper参数控制父类的输出。</p>
<ul>
<li><p>includeFieldNames是否包含属性名称：<br><img src="https://leanote.com/api/file/getImage?fileId=5a54370fab644126e2000c45" alt="示例"></p>
</li>
<li><p>exclude 排除指定字段</p>
</li>
<li><p>callSuper输出父类属性</p>
</li>
</ul>
<p><img src="https://leanote.com/api/file/getImage?fileId=5a543c1aab644126e2000d38" alt="示例"></p>
<p>注意：父类也要有toString方法，不然打印的是对象内存地址</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//父类无toString方法</span></span><br><span class="line">Person(<span class="keyword">super</span>=com.motui.Person@<span class="number">3</span>abfe836, firstName=motui, address=北京, dateOfBirth=Tue Jan <span class="number">09</span> <span class="number">11</span>:<span class="number">49</span>:<span class="number">05</span> CST <span class="number">2018</span>, sex=<span class="keyword">true</span>)</span><br><span class="line"><span class="comment">//父类有toString方法</span></span><br><span class="line">Person(<span class="keyword">super</span>=People(id=<span class="number">111</span>), firstName=motui, address=北京, dateOfBirth=Tue Jan <span class="number">09</span> <span class="number">11</span>:<span class="number">50</span>:<span class="number">11</span> CST <span class="number">2018</span>, sex=<span class="keyword">true</span>)</span><br></pre></td></tr></table></figure>

<h3 id="6-5-EqualsAndHashCode"><a href="#6-5-EqualsAndHashCode" class="headerlink" title="6.5 @EqualsAndHashCode"></a>6.5 @EqualsAndHashCode</h3><p>该注解使用在<strong>类</strong>上，该注解在类级别注释会同时生成<code>equals</code>和<code>hashCode</code>。<br>注意继承关系的时候该注解的使用。详细介绍参照<a href="http://jnb.ociweb.com/jnb/jnbJan2010.html" target="_blank" rel="noopener">官方介绍</a></p>
<p>存在继承关系需要设置<code>callSuper</code>参数为<code>true</code>。</p>
<p><img src="https://leanote.com/api/file/getImage?fileId=5a543f5dab644126e2000d85" alt="示例"></p>
<h3 id="6-6-AllArgsConstructor"><a href="#6-6-AllArgsConstructor" class="headerlink" title="6.6 @AllArgsConstructor"></a>6.6 @AllArgsConstructor</h3><p>该注解使用在<strong>类</strong>上，该注解提供一个全参数的构造方法，默认不提供无参构造。</p>
<p><img src="https://leanote.com/api/file/getImage?fileId=5a546265ab644126e2001260" alt="img"></p>
<h3 id="6-7-NoArgsConstructor"><a href="#6-7-NoArgsConstructor" class="headerlink" title="6.7 @NoArgsConstructor"></a>6.7 @NoArgsConstructor</h3><p>该注解使用在<strong>类</strong>上，该注解提供一个无参构造</p>
<p><img src="https://leanote.com/api/file/getImage?fileId=5a546266ab644126e2001264" alt="示例"></p>
<h3 id="6-8-RequiredArgsConstructor"><a href="#6-8-RequiredArgsConstructor" class="headerlink" title="6.8 @RequiredArgsConstructor"></a>6.8 @RequiredArgsConstructor</h3><p>该注解使用在<strong>类</strong>上，使用类中所有带有 @NonNull 注解的或者带有 final 修饰的成员变量生成对应的构造方法。</p>
<p><img src="https://leanote.com/api/file/getImage?fileId=5a546265ab644126e200125f" alt="实例"></p>
<h3 id="6-9-Value"><a href="#6-9-Value" class="headerlink" title="6.9 @Value"></a>6.9 @Value</h3><p>这个注解用在 类 上，会生成含所有参数的构造方法，get 方法，此外还提供了equals、hashCode、toString 方法。<br><strong>注意：没有setter</strong></p>
<p><img src="https://leanote.com/api/file/getImage?fileId=5a546265ab644126e2001261" alt="示例"></p>
<h3 id="6-10-Cleanup"><a href="#6-10-Cleanup" class="headerlink" title="6.10 @Cleanup"></a>6.10 @Cleanup</h3><p>该注解使用在<strong>属性</strong>前，该注解是用来保证分配的资源被释放。在本地变量上使用该注解，任何后续代码都将封装在try/finally中，确保当前作用于中的资源被释放。默认<code>@Cleanup</code>清理的方法为<code>close</code>，可以使用value指定不同的方法名称。</p>
<p><img src="https://leanote.com/api/file/getImage?fileId=5a546266ab644126e2001266" alt="示例"></p>
<h3 id="6-11-Synchronized"><a href="#6-11-Synchronized" class="headerlink" title="6.11 @Synchronized"></a>6.11 @Synchronized</h3><p>该注解使用在类或者实例方法上，Synchronized在一个方法上，使用关键字可能会导致结果和想要的结果不同，因为多线程情况下会出现异常情况。Synchronized<br>关键字将在this示例方法情况下锁定当前对象，或者class讲台方法的对象上多锁定。这可能会导致死锁现象。一般情况下建议锁定一个专门用于此目的的独立锁，而不是允许公共对象进行锁定。该注解也是为了达到该目的。<br><img src="https://leanote.com/api/file/getImage?fileId=5a546265ab644126e2001262" alt="示例"></p>
<h3 id="6-12-SneakyThrows"><a href="#6-12-SneakyThrows" class="headerlink" title="6.12 @SneakyThrows"></a>6.12 @SneakyThrows</h3><p>该注解使用在<strong>方法</strong>上，这个注解用在 方法 上，可以将方法中的代码用 try-catch 语句包裹起来，捕获异常并在 catch 中用 </p>
<p>Lombok.sneakyThrow(e) 把异常抛出，可以使用 @SneakyThrows(Exception.class) 的形式指定抛出哪种异常。该注解需要谨慎使用。详情参看<a href="https://projectlombok.org/features/SneakyThrows" target="_blank" rel="noopener">官方介绍</a></p>
<p><img src="https://leanote.com/api/file/getImage?fileId=5a546266ab644126e2001265" alt="示例"></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/04/11/hello-world/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="zhanglu">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="zhanglu的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/04/11/hello-world/" class="post-title-link" itemprop="url">Hello World</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-04-11 20:42:21" itemprop="dateCreated datePublished" datetime="2020-04-11T20:42:21+08:00">2020-04-11</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/one-command-deployment.html" target="_blank" rel="noopener">Deployment</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/04/10/%E5%88%A9%E7%94%A8redis%E5%92%8Credisson%E5%AE%9E%E7%8E%B0%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="zhanglu">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="zhanglu的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/04/10/%E5%88%A9%E7%94%A8redis%E5%92%8Credisson%E5%AE%9E%E7%8E%B0%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81/" class="post-title-link" itemprop="url">利用redis和redisson实现分布式锁</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-04-10 23:58:22" itemprop="dateCreated datePublished" datetime="2020-04-10T23:58:22+08:00">2020-04-10</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="利用redis和redisson实现分布式锁"><a href="#利用redis和redisson实现分布式锁" class="headerlink" title="利用redis和redisson实现分布式锁"></a>利用redis和redisson实现分布式锁</h2><h3 id="1-使用redis实现简单的锁"><a href="#1-使用redis实现简单的锁" class="headerlink" title="1 使用redis实现简单的锁"></a>1 使用redis实现简单的锁</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> R <span class="title">submit</span><span class="params">(@RequestBody List&lt;WjAnswer&gt; wjAnswers)</span> </span>&#123;</span><br><span class="line">       String lockKey = <span class="string">"lockKey"</span>;</span><br><span class="line">       String clientId = UUID.randomUUID().toString();</span><br><span class="line">       <span class="keyword">try</span> &#123;</span><br><span class="line">           Boolean result = redisTemplate.opsForValue().setIfAbsent(lockKey, clientId, <span class="number">30</span>, TimeUnit.SECONDS);</span><br><span class="line">           <span class="comment">/*</span></span><br><span class="line"><span class="comment">         	判断是否新增了key 如果没有新增 则表明有线程在占用这个接口，接口暂时不可用，直接返回错误；如果有新增，则表明没有线程占用接口，可继续执行。</span></span><br><span class="line"><span class="comment">           */</span></span><br><span class="line">           <span class="keyword">if</span> (!result) &#123;</span><br><span class="line">               <span class="keyword">return</span> R.failed().setMsg(<span class="string">"请勿频繁刷新"</span>);</span><br><span class="line">           &#125;</span><br><span class="line">           System.out.println(<span class="string">"这里执行业务代码"</span>);</span><br><span class="line">       &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">           <span class="keyword">if</span> (clientId.equals(redisTemplate.opsForValue().get(lockKey))) &#123;</span><br><span class="line">               redisTemplate.delete(lockKey);</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<h3 id="1-1-注意事项"><a href="#1-1-注意事项" class="headerlink" title="1.1 注意事项"></a>1.1 注意事项</h3><ul>
<li>利用redis单线程原理实现</li>
<li>setIfAbsent： 如果键不存在则新增,存在则不改变已经有的值。</li>
<li>设置redis key有效时间30秒，可以是任意时间。简单业务场景可以这样设置。          </li>
<li>存在的问题：高并发下如果业务代码执行时间超过有redis key的效时间，就会造成锁失效</li>
<li>举例：Thread1 运行需要40秒，则lockKey在运行到30秒时已经失效，如果这时Thread2进行请求，则redis中已经没有lockKey，就会新建一把锁，继续执行，造成锁失效。 </li>
<li>解决办法：<blockquote>
<ol>
<li>新开一个线程 判断lockKey是否存在，如果存在就给lockKey“续命”，重新设置其有效时间，注意：新设的有效时间不能超过原有的时间。</li>
<li>2.用redisson解决</li>
</ol>
</blockquote>
</li>
</ul>
<h3 id="2-redisson分布式锁实现"><a href="#2-redisson分布式锁实现" class="headerlink" title="2 redisson分布式锁实现"></a>2 redisson分布式锁实现</h3><h4 id="2-1-redisson官网：-https-redisson-org"><a href="#2-1-redisson官网：-https-redisson-org" class="headerlink" title="2.1 redisson官网：  https://redisson.org/"></a>2.1 redisson官网：  <a href="https://redisson.org/" target="_blank" rel="noopener">https://redisson.org/</a></h4><h4 id="2-2-redisson初始化客户端"><a href="#2-2-redisson初始化客户端" class="headerlink" title="2.2 redisson初始化客户端"></a>2.2 redisson初始化客户端</h4><h5 id="2-2-1-引入依赖"><a href="#2-2-1-引入依赖" class="headerlink" title="2.2.1 引入依赖"></a>2.2.1 引入依赖</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--redisson--&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.redisson<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>redisson<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="2-2-2-redisson配置"><a href="#2-2-2-redisson配置" class="headerlink" title="2.2.2 redisson配置"></a>2.2.2 redisson配置</h5><p>参考文章地址：</p>
<ol>
<li>官方配置文档：  <a href="https://github.com/redisson/redisson/wiki/2.-配置方法" target="_blank" rel="noopener">https://github.com/redisson/redisson/wiki/2.-%E9%85%8D%E7%BD%AE%E6%96%B9%E6%B3%95</a> </li>
<li>springBoot集成redisson：   <a href="https://blog.csdn.net/lms1719/article/details/83652578" target="_blank" rel="noopener">https://blog.csdn.net/lms1719/article/details/83652578</a> </li>
</ol>
<ul>
<li>在项目的resources目录下，添加redisson的配置文件（这里使用yaml格式的配置文件redisson-config.yml，文件名可自己定， 文件的示例配置如下）。</li>
</ul>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#Redisson配置</span></span><br><span class="line"><span class="attr">singleServerConfig:</span></span><br><span class="line">  <span class="attr">address:</span> <span class="string">"redis://127.0.0.1:6379"</span></span><br><span class="line">  <span class="attr">password:</span> <span class="literal">null</span></span><br><span class="line">  <span class="attr">clientName:</span> <span class="literal">null</span></span><br><span class="line">  <span class="attr">database:</span> <span class="number">7</span> <span class="comment">#选择使用哪个数据库0~15</span></span><br><span class="line">  <span class="attr">idleConnectionTimeout:</span> <span class="number">10000</span></span><br><span class="line">  <span class="attr">pingTimeout:</span> <span class="number">1000</span></span><br><span class="line">  <span class="attr">connectTimeout:</span> <span class="number">10000</span></span><br><span class="line">  <span class="attr">timeout:</span> <span class="number">3000</span></span><br><span class="line">  <span class="attr">retryAttempts:</span> <span class="number">3</span></span><br><span class="line">  <span class="attr">retryInterval:</span> <span class="number">1500</span></span><br><span class="line">  <span class="attr">reconnectionTimeout:</span> <span class="number">3000</span></span><br><span class="line">  <span class="attr">failedAttempts:</span> <span class="number">3</span></span><br><span class="line">  <span class="attr">subscriptionsPerConnection:</span> <span class="number">5</span></span><br><span class="line">  <span class="attr">subscriptionConnectionMinimumIdleSize:</span> <span class="number">1</span></span><br><span class="line">  <span class="attr">subscriptionConnectionPoolSize:</span> <span class="number">50</span></span><br><span class="line">  <span class="attr">connectionMinimumIdleSize:</span> <span class="number">32</span></span><br><span class="line">  <span class="attr">connectionPoolSize:</span> <span class="number">64</span></span><br><span class="line">  <span class="attr">dnsMonitoringInterval:</span> <span class="number">5000</span></span><br><span class="line">  <span class="comment">#dnsMonitoring: false</span></span><br><span class="line"></span><br><span class="line"><span class="attr">threads:</span> <span class="number">0</span></span><br><span class="line"><span class="attr">nettyThreads:</span> <span class="number">0</span></span><br><span class="line"><span class="attr">codec:</span></span><br><span class="line">  <span class="attr">class:</span> <span class="string">"org.redisson.codec.JsonJacksonCodec"</span></span><br><span class="line"><span class="attr">transportMode:</span> <span class="string">"NIO"</span></span><br></pre></td></tr></table></figure>

<ul>
<li>添加Redisson的配置参数读取类RedissonConfig</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.dbfor.redis.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.redisson.Redisson;</span><br><span class="line"><span class="keyword">import</span> org.redisson.api.RedissonClient;</span><br><span class="line"><span class="keyword">import</span> org.redisson.config.Config;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RedissonConfig</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Redisson <span class="title">redisson</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        <span class="comment">// 本例子使用的是yaml格式的配置文件，读取使用Config.fromYAML，如果是Json文件，则使用Config.fromJSON</span></span><br><span class="line">        Config config = Config.fromYAML(RedissonConfig.class.getClassLoader().getResource("redisson-config.yml"));</span><br><span class="line">        <span class="keyword">return</span> (Redisson)Redisson.create(config);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>编写测试类</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.dbfor.redis;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">import</span> org.junit.runner.RunWith;</span><br><span class="line"><span class="keyword">import</span> org.redisson.api.RBucket;</span><br><span class="line"><span class="keyword">import</span> org.redisson.api.RedissonClient;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.test.context.SpringBootTest;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"><span class="keyword">import</span> org.springframework.test.context.junit4.SpringRunner;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="meta">@RunWith</span>(SpringRunner<span class="class">.<span class="keyword">class</span>)</span></span><br><span class="line"><span class="class">@<span class="title">Component</span></span></span><br><span class="line"><span class="class"><span class="title">public</span> <span class="title">class</span> <span class="title">RedissonTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> RedissonClient redissonClient;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">set</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 设置字符串</span></span><br><span class="line">        RBucket&lt;String&gt; keyObj = redissonClient.getBucket(<span class="string">"k1"</span>);</span><br><span class="line">        keyObj.set(<span class="string">"v1236"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">测试成功</span><br></pre></td></tr></table></figure>

<h5 id="2-2-4-用Redisson编写分布式锁"><a href="#2-2-4-用Redisson编写分布式锁" class="headerlink" title="2.2.4 用Redisson编写分布式锁"></a>2.2.4 用Redisson编写分布式锁</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> Redisson redisson;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> R <span class="title">submit</span><span class="params">(@RequestBody List&lt;WjAnswer&gt; wjAnswers)</span> </span>&#123;</span><br><span class="line">          String lockKey = <span class="string">"lockKey"</span>;</span><br><span class="line">     	  RLock rLock = redisson.getLock(lockKey);<span class="comment">//redisson锁</span></span><br><span class="line">          <span class="keyword">try</span> &#123;</span><br><span class="line">  			  rLock.lock();<span class="comment">//加锁</span></span><br><span class="line">              System.out.println(<span class="string">"这里执行业务代码"</span>);</span><br><span class="line">          &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">              rLock.unlock();<span class="comment">//释放锁</span></span><br><span class="line">          &#125;</span><br><span class="line">      &#125;</span><br></pre></td></tr></table></figure>




      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/04/09/hexo%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2+%E5%8F%91%E5%B8%83/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="zhanglu">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="zhanglu的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/04/09/hexo%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2+%E5%8F%91%E5%B8%83/" class="post-title-link" itemprop="url">hexo搭建博客+发布</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-04-09 21:36:45 / 修改时间：21:58:02" itemprop="dateCreated datePublished" datetime="2020-04-09T21:36:45+08:00">2020-04-09</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="hexo搭建博客-发布"><a href="#hexo搭建博客-发布" class="headerlink" title="hexo搭建博客+发布"></a>hexo搭建博客+发布</h2><h3 id="1-安装node-js"><a href="#1-安装node-js" class="headerlink" title="1 安装node.js"></a>1 安装node.js</h3><ul>
<li>node -v 查看版本</li>
</ul>
<h3 id="2-安装npm"><a href="#2-安装npm" class="headerlink" title="2 安装npm"></a>2 安装npm</h3><ul>
<li>全局安装cnpm：npm install -g cnpm –registry=<a href="https://registry.npm.taobao.org/" target="_blank" rel="noopener">https://registry.npm.taobao.org</a></li>
</ul>
<h3 id="3-安装hexo"><a href="#3-安装hexo" class="headerlink" title="3 安装hexo"></a>3 安装hexo</h3><ul>
<li><p>全局安装hexo： cnpm install -g hero-cli  查看版本 hexo -v</p>
</li>
<li><p>新建一个文件夹： mkdir blog</p>
</li>
<li><p>初始化一个博客：sudo hexo init</p>
</li>
</ul>
<h3 id="4-启动-更新博客"><a href="#4-启动-更新博客" class="headerlink" title="4 启动 更新博客"></a>4 启动 更新博客</h3><ul>
<li><p>启动博客：hexo s   本地地址：<a href="http://localhost:4000" target="_blank" rel="noopener">http://localhost:4000</a></p>
</li>
<li><p>新建一篇文章：在/blog/source/_posts/ 路径下新建md文件 </p>
</li>
<li><p>在blog根目录下重新发布：</p>
</li>
<li><ul>
<li>清理缓存：hexo clean   </li>
<li>生成博客：hexo g </li>
</ul>
</li>
<li><p>重新启动：hexo s</p>
</li>
</ul>
<h3 id="5-在github发布"><a href="#5-在github发布" class="headerlink" title="5 在github发布"></a>5 在github发布</h3><h4 id="在自己github上新建一个仓库-New-repository"><a href="#在自己github上新建一个仓库-New-repository" class="headerlink" title="在自己github上新建一个仓库 New repository"></a>在自己github上新建一个仓库 New repository</h4><h5 id="repository-name-必须为用户名-github-io-例如-zhanglu002-github-io"><a href="#repository-name-必须为用户名-github-io-例如-zhanglu002-github-io" class="headerlink" title="repository name 必须为用户名.github.io   例如:zhanglu002.github.io"></a>repository name 必须为用户名.github.io   例如:zhanglu002.github.io</h5><h4 id="在blog中安装git插件：-cnpm-install-–save-hexo-deployer-git"><a href="#在blog中安装git插件：-cnpm-install-–save-hexo-deployer-git" class="headerlink" title="在blog中安装git插件： cnpm install –save hexo-deployer-git"></a>在blog中安装git插件： cnpm install –save hexo-deployer-git</h4><h5 id="设置-config-yml："><a href="#设置-config-yml：" class="headerlink" title="设置_config.yml："></a>设置_config.yml：</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># Deployment</span><br><span class="line">## Docs: https:&#x2F;&#x2F;hexo.io&#x2F;docs&#x2F;deployment.html</span><br><span class="line">deploy:</span><br><span class="line">	#type 设置为 git</span><br><span class="line">  type: git </span><br><span class="line">  #repo 设置为 github上创建的博客仓库地址</span><br><span class="line">  repo: https:&#x2F;&#x2F;github.com&#x2F;zhanglu002&#x2F;zhanglu002.github.io.git</span><br><span class="line">  #branch 设置为 master分支</span><br><span class="line">  branch: master</span><br></pre></td></tr></table></figure>

<h4 id="部署到远端：-hexo-d-或者sudo-hexo-d-然后在提示中输入github账号和密码"><a href="#部署到远端：-hexo-d-或者sudo-hexo-d-然后在提示中输入github账号和密码" class="headerlink" title="部署到远端： hexo d 或者sudo hexo d  然后在提示中输入github账号和密码"></a>部署到远端： hexo d 或者sudo hexo d  然后在提示中输入github账号和密码</h4><h4 id="访问最新的博客：-输入repository-name-例如：zhanglu002-github-io-到浏览器访问最新的博客"><a href="#访问最新的博客：-输入repository-name-例如：zhanglu002-github-io-到浏览器访问最新的博客" class="headerlink" title="访问最新的博客： 输入repository name 例如：zhanglu002.github.io 到浏览器访问最新的博客"></a>访问最新的博客： 输入repository name 例如：zhanglu002.github.io 到浏览器访问最新的博客</h4><h3 id="6-博客主题设置"><a href="#6-博客主题设置" class="headerlink" title="6 博客主题设置"></a>6 博客主题设置</h3><h4 id="主题地址：-https-github-com-litten-hexo-theme-yilia"><a href="#主题地址：-https-github-com-litten-hexo-theme-yilia" class="headerlink" title="主题地址： https://github.com/litten/hexo-theme-yilia"></a>主题地址： <a href="https://github.com/litten/hexo-theme-yilia" target="_blank" rel="noopener">https://github.com/litten/hexo-theme-yilia</a></h4><h4 id="安装：-git-clone-https-github-com-litten-hexo-theme-yilia-git-themes-yilia"><a href="#安装：-git-clone-https-github-com-litten-hexo-theme-yilia-git-themes-yilia" class="headerlink" title="安装：$ git clone https://github.com/litten/hexo-theme-yilia.git themes/yilia"></a>安装：$ git clone <a href="https://github.com/litten/hexo-theme-yilia.git" target="_blank" rel="noopener">https://github.com/litten/hexo-theme-yilia.git</a> themes/yilia</h4><h4 id="配置：-修改hexo根目录下的-config-yml-：-theme-yilia"><a href="#配置：-修改hexo根目录下的-config-yml-：-theme-yilia" class="headerlink" title="配置： 修改hexo根目录下的 _config.yml ： theme: yilia"></a>配置： 修改hexo根目录下的 <code>_config.yml</code> ： <code>theme: yilia</code></h4><h4 id="更新："><a href="#更新：" class="headerlink" title="更新："></a>更新：</h4>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd themes&#x2F;yilia</span><br><span class="line">git pull</span><br></pre></td></tr></table></figure>

<h4 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h4> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br></pre></td><td class="code"><pre><span class="line"># Header</span><br><span class="line">  menu:</span><br><span class="line">    主页: &#x2F;</span><br><span class="line">    随笔: &#x2F;tags&#x2F;随笔&#x2F;</span><br><span class="line">  </span><br><span class="line">  # SubNav</span><br><span class="line">  subnav:</span><br><span class="line">    github: &quot;#&quot;</span><br><span class="line">    weibo: &quot;#&quot;</span><br><span class="line">    rss: &quot;#&quot;</span><br><span class="line">    zhihu: &quot;#&quot;</span><br><span class="line">    #qq: &quot;#&quot;</span><br><span class="line">    #weixin: &quot;#&quot;</span><br><span class="line">    #jianshu: &quot;#&quot;</span><br><span class="line">    #douban: &quot;#&quot;</span><br><span class="line">    #segmentfault: &quot;#&quot;</span><br><span class="line">    #bilibili: &quot;#&quot;</span><br><span class="line">    #acfun: &quot;#&quot;</span><br><span class="line">    #mail: &quot;mailto:litten225@qq.com&quot;</span><br><span class="line">    #facebook: &quot;#&quot;</span><br><span class="line">    #google: &quot;#&quot;</span><br><span class="line">    #twitter: &quot;#&quot;</span><br><span class="line">    #linkedin: &quot;#&quot;</span><br><span class="line">  </span><br><span class="line">  rss: &#x2F;atom.xml</span><br><span class="line">  </span><br><span class="line">  # 是否需要修改 root 路径</span><br><span class="line">  # 如果您的网站存放在子目录中，例如 http:&#x2F;&#x2F;yoursite.com&#x2F;blog，</span><br><span class="line">  # 请将您的 url 设为 http:&#x2F;&#x2F;yoursite.com&#x2F;blog 并把 root 设为 &#x2F;blog&#x2F;。</span><br><span class="line">  root: </span><br><span class="line">  </span><br><span class="line">  # Content</span><br><span class="line">  </span><br><span class="line">  # 文章太长，截断按钮文字</span><br><span class="line">  excerpt_link: more</span><br><span class="line">  # 文章卡片右下角常驻链接，不需要请设置为false</span><br><span class="line">  show_all_link: &#39;展开全文&#39;</span><br><span class="line">  # 数学公式</span><br><span class="line">  mathjax: false</span><br><span class="line">  # 是否在新窗口打开链接</span><br><span class="line">  open_in_new: false</span><br><span class="line">  </span><br><span class="line">  # 打赏</span><br><span class="line">  # 打赏type设定：0-关闭打赏； 1-文章对应的md文件里有reward:true属性，才有打赏； 2-所有文章均有打赏</span><br><span class="line">  reward_type: 2</span><br><span class="line">  # 打赏wording</span><br><span class="line">  reward_wording: &#39;谢谢你请我吃糖果&#39;</span><br><span class="line">  # 支付宝二维码图片地址，跟你设置头像的方式一样。比如：&#x2F;assets&#x2F;img&#x2F;alipay.jpg</span><br><span class="line">  alipay: </span><br><span class="line">  # 微信二维码图片地址</span><br><span class="line">  weixin: </span><br><span class="line">  </span><br><span class="line">  # 目录</span><br><span class="line">  # 目录设定：0-不显示目录； 1-文章对应的md文件里有toc:true属性，才有目录； 2-所有文章均显示目录</span><br><span class="line">  toc: 1</span><br><span class="line">  # 根据自己的习惯来设置，如果你的目录标题习惯有标号，置为true即可隐藏hexo重复的序号；否则置为false</span><br><span class="line">  toc_hide_index: true</span><br><span class="line">  # 目录为空时的提示</span><br><span class="line">  toc_empty_wording: &#39;目录，不存在的…&#39;</span><br><span class="line">  </span><br><span class="line">  # 是否有快速回到顶部的按钮</span><br><span class="line">  top: true</span><br><span class="line">  </span><br><span class="line">  # Miscellaneous</span><br><span class="line">  baidu_analytics: &#39;&#39;</span><br><span class="line">  google_analytics: &#39;&#39;</span><br><span class="line">  favicon: &#x2F;favicon.png</span><br><span class="line">  </span><br><span class="line">  #你的头像url</span><br><span class="line">  avatar:</span><br><span class="line">  </span><br><span class="line">  #是否开启分享</span><br><span class="line">  share_jia: true</span><br><span class="line">  </span><br><span class="line">  #评论：1、多说；2、网易云跟帖；3、畅言；4、Disqus；5、Gitment</span><br><span class="line">  #不需要使用某项，直接设置值为false，或注释掉</span><br><span class="line">  #具体请参考wiki：https:&#x2F;&#x2F;github.com&#x2F;litten&#x2F;hexo-theme-yilia&#x2F;wiki&#x2F;</span><br><span class="line">  </span><br><span class="line">  #1、多说</span><br><span class="line">  duoshuo: false</span><br><span class="line">  </span><br><span class="line">  #2、网易云跟帖</span><br><span class="line">  wangyiyun: false</span><br><span class="line">  </span><br><span class="line">  #3、畅言</span><br><span class="line">  changyan_appid: false</span><br><span class="line">  changyan_conf: false</span><br><span class="line">  </span><br><span class="line">  #4、Disqus 在hexo根目录的config里也有disqus_shortname字段，优先使用yilia的</span><br><span class="line">  disqus: false</span><br><span class="line">  </span><br><span class="line">  #5、Gitment</span><br><span class="line">  gitment_owner: false      #你的 GitHub ID</span><br><span class="line">  gitment_repo: &#39;&#39;          #存储评论的 repo</span><br><span class="line">  gitment_oauth:</span><br><span class="line">    client_id: &#39;&#39;           #client ID</span><br><span class="line">    client_secret: &#39;&#39;       #client secret</span><br><span class="line">  </span><br><span class="line">  # 样式定制 - 一般不需要修改，除非有很强的定制欲望…</span><br><span class="line">  style:</span><br><span class="line">    # 头像上面的背景颜色</span><br><span class="line">    header: &#39;#4d4d4d&#39;</span><br><span class="line">    # 右滑板块背景</span><br><span class="line">    slider: &#39;linear-gradient(200deg,#a0cfe4,#e8c37e)&#39;</span><br><span class="line">  </span><br><span class="line">  # slider的设置</span><br><span class="line">  slider:</span><br><span class="line">    # 是否默认展开tags板块</span><br><span class="line">    showTags: false</span><br><span class="line">  </span><br><span class="line">  # 智能菜单</span><br><span class="line">  # 如不需要，将该对应项置为false</span><br><span class="line">  # 比如</span><br><span class="line">  #smart_menu:</span><br><span class="line">  #  friends: false</span><br><span class="line">  smart_menu:</span><br><span class="line">    innerArchive: &#39;所有文章&#39;</span><br><span class="line">    friends: &#39;友链&#39;</span><br><span class="line">    aboutme: &#39;关于我&#39;</span><br><span class="line">  </span><br><span class="line">  friends:</span><br><span class="line">    友情链接1: http:&#x2F;&#x2F;localhost:4000&#x2F;</span><br><span class="line">    友情链接2: http:&#x2F;&#x2F;localhost:4000&#x2F;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/04/09/%E6%8E%A5%E5%8F%A3%E8%BF%94%E5%9B%9E%E4%BD%93demo/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="zhanglu">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="zhanglu的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/04/09/%E6%8E%A5%E5%8F%A3%E8%BF%94%E5%9B%9E%E4%BD%93demo/" class="post-title-link" itemprop="url">接口返回体demo</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-04-09 20:39:46" itemprop="dateCreated datePublished" datetime="2020-04-09T20:39:46+08:00">2020-04-09</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-04-11 00:08:16" itemprop="dateModified" datetime="2020-04-11T00:08:16+08:00">2020-04-11</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="接口返回结果Demo"><a href="#接口返回结果Demo" class="headerlink" title="接口返回结果Demo"></a>接口返回结果Demo</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">package</span> com.idatage.cloud.common.core.util;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.idatage.cloud.common.core.constant.CommonConstants;</span><br><span class="line"><span class="keyword">import</span> io.swagger.annotations.ApiModel;</span><br><span class="line"><span class="keyword">import</span> io.swagger.annotations.ApiModelProperty;</span><br><span class="line"><span class="keyword">import</span> java.io.Serializable;</span><br><span class="line"></span><br><span class="line"><span class="meta">@ApiModel</span>(<span class="string">"响应信息主体"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">R</span>&lt;<span class="title">T</span>&gt; <span class="keyword">implements</span> <span class="title">Serializable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">1L</span>;</span><br><span class="line">    <span class="meta">@ApiModelProperty</span>(<span class="string">"返回标记：成功标记=0，失败标记=1"</span>)</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> code;</span><br><span class="line">    <span class="meta">@ApiModelProperty</span>(<span class="string">"返回信息"</span>)</span><br><span class="line">    <span class="keyword">private</span> String msg;</span><br><span class="line">    <span class="meta">@ApiModelProperty</span>(<span class="string">"数据"</span>)</span><br><span class="line">    <span class="keyword">private</span> T data;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; <span class="function">R&lt;T&gt; <span class="title">ok</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> restResult((Object)<span class="keyword">null</span>, CommonConstants.SUCCESS, (String)<span class="keyword">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; <span class="function">R&lt;T&gt; <span class="title">ok</span><span class="params">(T data)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> restResult(data, CommonConstants.SUCCESS, (String)<span class="keyword">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; <span class="function">R&lt;T&gt; <span class="title">ok</span><span class="params">(T data, String msg)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> restResult(data, CommonConstants.SUCCESS, msg);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; <span class="function">R&lt;T&gt; <span class="title">failed</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> restResult((Object)<span class="keyword">null</span>, CommonConstants.FAIL, (String)<span class="keyword">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; <span class="function">R&lt;T&gt; <span class="title">failed</span><span class="params">(String msg)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> restResult((Object)<span class="keyword">null</span>, CommonConstants.FAIL, msg);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; <span class="function">R&lt;T&gt; <span class="title">failed</span><span class="params">(T data)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> restResult(data, CommonConstants.FAIL, (String)<span class="keyword">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; <span class="function">R&lt;T&gt; <span class="title">failed</span><span class="params">(T data, String msg)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> restResult(data, CommonConstants.FAIL, msg);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> &lt;T&gt; <span class="function">R&lt;T&gt; <span class="title">restResult</span><span class="params">(T data, <span class="keyword">int</span> code, String msg)</span> </span>&#123;</span><br><span class="line">        R&lt;T&gt; apiResult = <span class="keyword">new</span> R();</span><br><span class="line">        apiResult.setCode(code);</span><br><span class="line">        apiResult.setData(data);</span><br><span class="line">        apiResult.setMsg(msg);</span><br><span class="line">        <span class="keyword">return</span> apiResult;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"R(code="</span> + <span class="keyword">this</span>.getCode() + <span class="string">", msg="</span> + <span class="keyword">this</span>.getMsg() + <span class="string">", data="</span> + <span class="keyword">this</span>.getData() + <span class="string">")"</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">R</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">R</span><span class="params">(<span class="keyword">int</span> code, String msg, T data)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.code = code;</span><br><span class="line">        <span class="keyword">this</span>.msg = msg;</span><br><span class="line">        <span class="keyword">this</span>.data = data;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getCode</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.code;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> R&lt;T&gt; <span class="title">setCode</span><span class="params">(<span class="keyword">int</span> code)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.code = code;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getMsg</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.msg;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> R&lt;T&gt; <span class="title">setMsg</span><span class="params">(String msg)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.msg = msg;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> T <span class="title">getData</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.data;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> R&lt;T&gt; <span class="title">setData</span><span class="params">(T data)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.data = data;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">zhanglu</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">11</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">zhanglu</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
